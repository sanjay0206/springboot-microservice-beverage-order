2025-05-10T21:20:41.954+05:30  INFO [order-service,,] 4828 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-10T21:20:41.956+05:30  INFO [order-service,,] 4828 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-10T21:20:41.964+05:30  INFO [order-service,,] 4828 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 7 ms
2025-05-10T21:20:42.132+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,c91bda9b3022337b] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@11759e4a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@354a1239, org.springframework.security.web.context.SecurityContextHolderFilter@71077d1, org.springframework.security.web.header.HeaderWriterFilter@e36a4c1, org.springframework.security.web.csrf.CsrfFilter@3edc999f, org.springframework.security.web.authentication.logout.LogoutFilter@17224bad, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@41a18b54, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@630a647c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1dcfbad1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78fcc4ef, org.springframework.security.web.session.SessionManagementFilter@2cc3b0a7, org.springframework.security.web.access.ExceptionTranslationFilter@63f093a, org.springframework.security.web.access.intercept.AuthorizationFilter@17eb5661]] (1/1)
2025-05-10T21:20:42.136+05:30 DEBUG [order-service,681f75d1a2376a281c23e87bda306ead,c91bda9b3022337b] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/order/place
2025-05-10T21:20:42.143+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,c91bda9b3022337b] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/13)
2025-05-10T21:20:42.158+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/13)
2025-05-10T21:20:42.163+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/13)
2025-05-10T21:20:42.165+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/13)
2025-05-10T21:20:42.169+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/13)
2025-05-10T21:20:42.175+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match And [CsrfNotRequired [TRACE, HEAD, GET, OPTIONS], Not [Or [org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$BearerTokenRequestMatcher@2d05d022]]]
2025-05-10T21:20:42.176+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (6/13)
2025-05-10T21:20:42.176+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern='/logout', POST]
2025-05-10T21:20:42.176+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (7/13)
2025-05-10T21:20:42.181+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,b895012f68335248] 4828 --- [nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
token: eyJraWQiOiIyYWRjZmZhOS0wNmY4LTRmNjMtYWI0MS1iMGVjMDA1ZjViZjgiLCJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJqb2huX2RvZSIsIm5iZiI6MTc0Njg5MTc1NSwicm9sZXMiOlsiUk9MRV9VU0VSIl0sImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4My9hcGkvYXV0aCIsImV4cCI6MTc0Njg5Mjk1NSwiaWF0IjoxNzQ2ODkxNzU1fQ.BayZEf69vXph3ZYUXrzGbpavufneck5i3FDA5KQgcNx7_FBp1VNUugI-ZSm6IhBVUiUPosIwnjZQqe2jF-Xv8w2yIUewRg61Bc15-Rs_1n_lZ9Kdrz7TRCdGjVPiI-ClO5gquYFqa-Pi9VwXqBCYKLt0iVpi-W-k_pXG1ih5pKLfQGtfnp3-N4jFfNX4t5O2Jr36afjmOiyKA7cY3A5hdyY1oHuYkK6RQfA_hW8TRNyCWaryzK7bnHf229dILZPLdB7VcgBDEwoAHn4Rm6SMRFSDzu1c73YsKVWL1FtXIz4FmPXMJAqmuaNWQ09QuwODfS0MuD_MeDQw0oAtTmTpGw
2025-05-10T21:20:42.338+05:30  INFO [order-service,681f75d1a2376a281c23e87bda306ead,b895012f68335248] 4828 --- [nio-8080-exec-1] com.infybuzz.security.JwtAuthConverter   : authorities: [ROLE_USER]
2025-05-10T21:20:42.339+05:30 DEBUG [order-service,681f75d1a2376a281c23e87bda306ead,b895012f68335248] 4828 --- [nio-8080-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2025-05-10T21:20:42.356+05:30 DEBUG [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ce0e9423, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-05-10T21:20:42.356+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)
2025-05-10T21:20:42.356+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)
2025-05-10T21:20:42.358+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)
2025-05-10T21:20:42.359+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)
2025-05-10T21:20:42.360+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ce0e9423, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-05-10T21:20:42.360+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/2)
2025-05-10T21:20:42.361+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with CsrfAuthenticationStrategy (2/2)
2025-05-10T21:20:42.361+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)
2025-05-10T21:20:42.361+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,cdd2d3e0cafa1b31] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)
2025-05-10T21:20:42.365+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,eb2c3a3d14989cb7] 4828 --- [nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@64948252]
2025-05-10T21:20:42.377+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,eb2c3a3d14989cb7] 4828 --- [nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@64948252] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2df4a54
2025-05-10T21:20:42.387+05:30 DEBUG [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/order/place
2025-05-10T21:20:42.457+05:30 DEBUG [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.infybuzz.response.OrderResponse com.infybuzz.controller.OrderController.placeOrder(com.infybuzz.request.CreateOrderRequest); target is of class [com.infybuzz.controller.OrderController]
2025-05-10T21:20:42.522+05:30 DEBUG [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.infybuzz.response.OrderResponse com.infybuzz.controller.OrderController.placeOrder(com.infybuzz.request.CreateOrderRequest); target is of class [com.infybuzz.controller.OrderController]
2025-05-10T21:20:42.524+05:30  INFO [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] com.infybuzz.service.OrderService        : Inside placeOrder = CreateOrderRequest(userId=1, beverages=[BeverageRequest(beverageId=2, quantity=1)])
2025-05-10T21:20:42.527+05:30 DEBUG [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] org.hibernate.SQL                        : insert into orders (order_date, order_status, total_cost, user_id) values (?, ?, ?, ?)
Hibernate: insert into orders (order_date, order_status, total_cost, user_id) values (?, ?, ?, ?)
2025-05-10T21:20:42.536+05:30  INFO [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] com.infybuzz.service.CommonService       : count = 1
Token Value: eyJraWQiOiIyYWRjZmZhOS0wNmY4LTRmNjMtYWI0MS1iMGVjMDA1ZjViZjgiLCJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJqb2huX2RvZSIsIm5iZiI6MTc0Njg5MTc1NSwicm9sZXMiOlsiUk9MRV9VU0VSIl0sImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4My9hcGkvYXV0aCIsImV4cCI6MTc0Njg5Mjk1NSwiaWF0IjoxNzQ2ODkxNzU1fQ.BayZEf69vXph3ZYUXrzGbpavufneck5i3FDA5KQgcNx7_FBp1VNUugI-ZSm6IhBVUiUPosIwnjZQqe2jF-Xv8w2yIUewRg61Bc15-Rs_1n_lZ9Kdrz7TRCdGjVPiI-ClO5gquYFqa-Pi9VwXqBCYKLt0iVpi-W-k_pXG1ih5pKLfQGtfnp3-N4jFfNX4t5O2Jr36afjmOiyKA7cY3A5hdyY1oHuYkK6RQfA_hW8TRNyCWaryzK7bnHf229dILZPLdB7VcgBDEwoAHn4Rm6SMRFSDzu1c73YsKVWL1FtXIz4FmPXMJAqmuaNWQ09QuwODfS0MuD_MeDQw0oAtTmTpGw
2025-05-10T21:20:44.578+05:30  INFO [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] com.infybuzz.service.OrderService        : Quantity = 1 | Beverage = BeverageResponse(beverageId=2, beverageName=Green Tea, beverageCost=11.8, beverageType=TEA, availability=8)
2025-05-10T21:20:44.582+05:30 DEBUG [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] org.hibernate.SQL                        : select o1_0.beverage_id,o1_0.order_id,o1_0.quantity from order_beverage o1_0 where (o1_0.beverage_id,o1_0.order_id) in((?,?))
Hibernate: select o1_0.beverage_id,o1_0.order_id,o1_0.quantity from order_beverage o1_0 where (o1_0.beverage_id,o1_0.order_id) in((?,?))
Token Value: eyJraWQiOiIyYWRjZmZhOS0wNmY4LTRmNjMtYWI0MS1iMGVjMDA1ZjViZjgiLCJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJqb2huX2RvZSIsIm5iZiI6MTc0Njg5MTc1NSwicm9sZXMiOlsiUk9MRV9VU0VSIl0sImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4My9hcGkvYXV0aCIsImV4cCI6MTc0Njg5Mjk1NSwiaWF0IjoxNzQ2ODkxNzU1fQ.BayZEf69vXph3ZYUXrzGbpavufneck5i3FDA5KQgcNx7_FBp1VNUugI-ZSm6IhBVUiUPosIwnjZQqe2jF-Xv8w2yIUewRg61Bc15-Rs_1n_lZ9Kdrz7TRCdGjVPiI-ClO5gquYFqa-Pi9VwXqBCYKLt0iVpi-W-k_pXG1ih5pKLfQGtfnp3-N4jFfNX4t5O2Jr36afjmOiyKA7cY3A5hdyY1oHuYkK6RQfA_hW8TRNyCWaryzK7bnHf229dILZPLdB7VcgBDEwoAHn4Rm6SMRFSDzu1c73YsKVWL1FtXIz4FmPXMJAqmuaNWQ09QuwODfS0MuD_MeDQw0oAtTmTpGw
2025-05-10T21:20:44.789+05:30  INFO [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] com.infybuzz.service.OrderService        : totalCost = 11.8
2025-05-10T21:20:44.793+05:30 DEBUG [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] org.hibernate.SQL                        : insert into order_beverage (quantity, beverage_id, order_id) values (?, ?, ?)
Hibernate: insert into order_beverage (quantity, beverage_id, order_id) values (?, ?, ?)
2025-05-10T21:20:44.796+05:30 DEBUG [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] org.hibernate.SQL                        : update orders set order_status=?, total_cost=? where order_id=?
Hibernate: update orders set order_status=?, total_cost=? where order_id=?
2025-05-10T21:20:44.861+05:30 TRACE [order-service,681f75d1a2376a281c23e87bda306ead,51190eb4e0945d06] 4828 --- [nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
